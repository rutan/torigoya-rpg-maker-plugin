base: &base
  version: 1.3.2
  title:
    ja: スキル発動前カットイン表示プラグイン
  help:
    ja: |
      このプラグインは「Tweenアニメーションプラグイン」が必要です。
      Tweenアニメーションプラグインより下に入れてください。

      指定スキルの発動前にカットインを表示する機能を追加します。

      ------------------------------------------------------------
      ■ 基本的な使い方
      ------------------------------------------------------------

      (1) カットイン用の共通画像を用意する

      ・カットイン用の背景画像1
      ・カットイン用の背景画像2
      ・カットイン用の境界線画像

      上記3種類の画像を用意して
      ピクチャー用のフォルダ（img/pictures）に入れる必要があります。
      以下のページで自由に使える画像素材を配布しています。

      https://torigoya-plugin.rutan.dev/battle/skillCutIn

      (2) カットイン用のキャラの画像を用意する

      カットインを表示したいキャラの画像を好きなだけ用意します。
      キャラの画像もピクチャー用のフォルダ（img/pictures）に入れてください。

      (3) カットインの設定をする

      プラグイン設定から「味方のカットイン設定」を開き、
      設定したい分だけ項目を追加してください。

      ■ 対象設定

      「どのキャラが」「何のスキルを使った」を設定します。
      例えば「ハロルド」が「スターライトⅡ」を使った、のような設定をします。

      ここで設定した条件を満たしたときにカットインが表示されます。

      ■ キャラ画像

      表示するキャラクターの画像ファイルの選択や
      表示位置・サイズの調整ができます

      ■ 個別設定（省略可）

      このカットインだけ色を変えたい！みたいな場合は設定してください。
      不要な場合は省略して大丈夫です。

      ■ メモ欄

      メモ欄です。自由にメモをすることができます。
      また、一部の特殊な設定を記述できます。

      -----

      これで基本的な設定は完了です。
      対象のキャラでスキルを使うとカットインが表示されます。

      ------------------------------------------------------------
      ■ プロ向けの使い方
      ------------------------------------------------------------

      各カットイン設定の中にあるメモ欄に
      特殊な記載をすることで、少し複雑な使い方ができます。

      ● カットインの角度を変える

      デフォルトでは斜め下からキャラカットインが表示されますが、
      メモ欄に以下のように書くことで角度を変えることができます。

      <角度: 45>

      角度は0～360で指定してください。
      角度が0の場合は左から、90の場合は上から、
      180の場合は右から、270の場合は下から
      それぞれキャラカットインが表示されます。

      ● カットインの表示条件を複雑にする

      例えば、HPが50%以下のときだけカットインを表示したい場合は
      メモ欄に以下のように記述します。

      <条件: a.hp <= a.mhp * 0.5>

      条件として書かれた内容が真のときのみ、
      該当のカットインが表示されます。
      ダメージ計算式と同じように a に自分自身が入ります。
      ただし b （相手）はありません。

      ● スキルではなくアイテム使用時にカットインを出す

      まず、カットインの設定でスキルIDを「なし」にします。
      そして、カットイン設定のメモ欄に以下のように記述してください。

      <アイテム: 7>

      こうすると、アイテムID:7のアイテムを使ったときに
      カットインが表示されるようになります。

      ● マップでカットインを表示する

      プラグインコマンドで呼び出すことができます。
      なお、呼び出すカットインには
      事前に呼び出し名を付けておく必要があります。
      呼び出し名は、カットイン設定のメモ欄に以下のように記述してください。

      <呼び出し名: myCutIn>

      「myCutIn」の部分は好きな名前にしてください。
      この名前をプラグインコマンドで指定することで、
      マップでもカットインを表示できます。
      呼び出し方法の詳細は解説ページをご覧ください。
  params:
    - name: base
      type: string
      text: ■ カットイン設定
    - name: actorConfig
      type: struct[]
      text: 味方のカットイン設定
      description: |-
        アクター用のカットイン設定です。
        上にあるものから優先されます。
      parent: base
      default: []
      struct: ActorCutinSet
    - name: enemyConfig
      type: struct[]
      text: 敵のカットイン設定
      description: |-
        敵用のカットイン設定です。
        上にあるものから優先されます。
      parent: base
      default: []
      struct: EnemyCutinSet
    - name: common
      type: string
      text: ■ 共通設定
    - name: commonBackImage1
      type: file
      text: 背景画像1
      description: 背景全体に表示される画像を指定します
      parent: common
      dir: img/pictures
      default: CutIn_back1
    - name: commonBackImage2
      type: file
      text: 背景画像2
      description: キャラクターの背景部分に表示される画像を指定します
      parent: common
      dir: img/pictures
      default: CutIn_back2
    - name: commonBorderImage
      type: file
      text: 境界線画像
      description: カットインの境界線部分に表示される画像を指定します
      parent: common
      dir: img/pictures
      default: CutIn_border
    - name: commonBorderBlendMode
      type: select
      text: 境界線画像のブレンド
      description: |-
        境界線画像のブレンドモードを指定します
        ※RPGツクールMZのみ有効
      parent: common
      default: add
      options:
        - name: 通常
          value: normal
        - name: 加算
          value: add
    - name: commonBorderSpeed
      type: number
      text: 境界線画像の移動速度
      description: |-
        境界線画像が移動する速度を指定します
        ※RPGツクールMZのみ有効
      parent: common
      default: 30
    - name: commonSound
      type: struct
      text: 効果音
      description: |-
        カットイン表示時の効果音を設定します
        各カットイン内で指定がある場合は、そちらを優先します
      parent: common
      default:
        name: Skill2
        volume: '90'
        pitch: '100'
        pan: '0'
      struct: Sound
    - name: cutInLayer
      type: select
      text: カットイン表示レイヤー
      description: |-
        カットインが表示されるレイヤーを指定します
        省略の場合は共通設定を使用します
      parent: common
      default: foreground
      options:
        - name: 常に最前面
          value: foreground
        - name: ウィンドウの上
          value: upperWindow
        - name: ウィンドウの下
          value: lowerWindow
    - name: cutInOpenAndCloseTime
      type: number
      text: カットイン表示開始/終了アニメーション時間
      description: |-
        カットインの表示開始/終了アニメーションの再生時間を指定します。
        60＝1秒です。
      parent: common
      default: 25
    - name: cutInStopTime
      type: number
      text: カットイン停止時間
      description: |-
        カットイン表示が画面にとどまる時間を指定します。
        60＝1秒です。
      parent: common
      default: 10
    - name: commonActor
      type: string
      text: ■ 味方用の共通設定
    - name: actorBackColor1
      type: string
      text: '味方: 背景色1'
      description: 味方のカットイン表示領域の背景色を設定します。
      parent: commonActor
      default: '#000033'
    - name: actorBackColor2
      type: string
      text: '味方: 背景色2'
      description: |-
        味方のカットイン表示領域の背景色を設定します
        空欄の場合は背景色1と一緒になります
      parent: commonActor
      default: '#6666ff'
    - name: actorBackTone
      type: struct
      text: '味方: エフェクト色調1'
      description: |-
        味方の背景エフェクトの色調を設定します
        ※RPGツクールMZのみ有効
      parent: commonActor
      default:
        red: '-128'
        green: '-128'
        blue: '128'
      struct: Color
    - name: actorBorderTone
      type: struct
      text: '味方: エフェクト色調2'
      description: |-
        味方の境界線エフェクトの色調を設定します
        ※RPGツクールMZのみ有効
      parent: commonActor
      default:
        red: '0'
        green: '0'
        blue: '0'
      struct: Color
    - name: commonEnemy
      type: string
      text: ■ 敵用の共通設定
    - name: enemyBackColor1
      type: string
      text: '敵: 背景色1'
      description: 敵のカットイン表示領域の背景色を設定します。
      parent: commonEnemy
      default: '#330000'
    - name: enemyBackColor2
      type: string
      text: '敵: 背景色2'
      description: |-
        敵のカットイン表示領域の背景色を設定します
        空欄の場合は背景色1と一緒になります
      parent: commonEnemy
      default: '#ff6666'
    - name: enemyBackTone
      type: struct
      text: '敵: エフェクト色調1'
      description: |-
        敵の背景エフェクトの色調を設定します
        ※RPGツクールMZのみ有効
      parent: commonEnemy
      default:
        red: '128'
        green: '-128'
        blue: '-128'
      struct: Color
    - name: enemyBorderTone
      type: struct
      text: '敵: エフェクト色調2'
      description: |-
        敵の境界線エフェクトの色調を設定します
        ※RPGツクールMZのみ有効
      parent: commonEnemy
      default:
        red: '0'
        green: '0'
        blue: '0'
      struct: Color
  structs:
    - name: ActorCutinSet
      params:
        - name: target
          type: string
          text: ■ 対象設定
        - name: render
          type: string
          text: ■ キャラ画像設定
        - name: picture
          type: file
          text: キャラ画像
          description: |-
            カットインで表示するキャラクターの画像を設定します
            画像はピクチャー用のフォルダに入れてください
          parent: render
          dir: img/pictures
          default: ''
        - name: pictureX
          type: number
          text: キャラ画像位置:X
          description: |-
            キャラ画像の表示位置（横方向）を調整します
            マイナスだと左、プラスだと右にずらします
          parent: render
          min: -10000
          max: 10000
          default: 0
        - name: pictureY
          type: number
          text: キャラ画像位置:Y
          description: |-
            キャラ画像の表示位置（縦方向）を調整します
            マイナスだと上、プラスだと下にずらします
          parent: render
          min: -10000
          max: 10000
          default: 0
        - name: pictureScale
          type: number
          text: キャラ画像:拡大率
          description: |-
            キャラ画像の拡大率を指定します
            1を指定した場合は1倍なのでそのまま表示されます
          parent: render
          decimals: 2
          min: 0.01
          default: 1
        - name: advanced
          type: string
          text: ■ 個別設定（省略可）
        - name: backColor1
          type: string
          text: 背景色1
          description: |-
            カットイン表示領域の背景色を設定します。
            省略した場合は共通設定が使用されます
          parent: advanced
          default: ''
        - name: backColor2
          type: string
          text: 背景色2
          description: |-
            カットイン表示領域の背景色を設定します
            空欄の場合は背景色1と一緒になります
          parent: advanced
          default: ''
        - name: backTone
          type: struct
          text: エフェクト色調1
          description: |-
            背景エフェクトの色調を設定します
            ※RPGツクールMZのみ有効
          parent: advanced
          default:
            isUse: false
            red: '-128'
            green: '-128'
            blue: '128'
          struct: ColorCustomize
        - name: borderTone
          type: struct
          text: エフェクト色調2
          description: |-
            境界線エフェクトの色調を設定します
            ※RPGツクールMZのみ有効
          parent: advanced
          default:
            isUse: false
            red: '0'
            green: '0'
            blue: '0'
          struct: ColorCustomize
        - name: backImage1
          type: file
          text: 背景画像1
          description: |-
            背景全体に表示される画像を指定します
            空欄の場合は共通設定を使用します
          parent: advanced
          dir: img/pictures
          default: ''
        - name: backImage2
          type: file
          text: 背景画像2
          description: |-
            キャラクターの背景部分に表示される画像を指定します
            空欄の場合は共通設定を使用します
          parent: advanced
          dir: img/pictures
          default: ''
        - name: borderImage
          type: file
          text: 境界線画像
          description: |-
            カットインの境界線部分に表示される画像を指定します
            空欄の場合は共通設定を使用します
          parent: advanced
          dir: img/pictures
          default: ''
        - name: borderBlendMode
          type: select
          text: 境界線画像のブレンド
          description: |-
            境界線画像のブレンドモードを指定します
            省略の場合は共通設定を使用します
          parent: advanced
          default: ''
          options:
            - name: 省略
              value: ''
            - name: 通常
              value: normal
            - name: 加算
              value: add
        - name: sound
          type: struct
          text: 効果音
          description: |-
            カットイン表示時の効果音を指定します
            指定しない場合はデフォルトの効果音を使用します
          parent: advanced
          default:
            name: ''
            volume: '90'
            pitch: '100'
            pan: '0'
          struct: Sound
        - name: note
          type: multiline_string
          text: メモ欄
          description: |-
            メモ欄です。
            ツクールのメモ欄同様に使えます。
          default: ''
        - name: actorId
          type: actor
          text: アクターのID
          description: カットイン対象のアクターを設定します
          parent: target
          default: 0
        - name: skillId
          type: skill
          text: スキルのID
          description: カットイン対象のスキルを設定します
          parent: target
          default: 0
    - name: EnemyCutinSet
      params:
        - name: target
          type: string
          text: ■ 対象設定
        - name: render
          type: string
          text: ■ キャラ画像設定
        - name: picture
          type: file
          text: キャラ画像
          description: |-
            カットインで表示するキャラクターの画像を設定します
            画像はピクチャー用のフォルダに入れてください
          parent: render
          dir: img/pictures
          default: ''
        - name: pictureX
          type: number
          text: キャラ画像位置:X
          description: |-
            キャラ画像の表示位置（横方向）を調整します
            マイナスだと左、プラスだと右にずらします
          parent: render
          min: -10000
          max: 10000
          default: 0
        - name: pictureY
          type: number
          text: キャラ画像位置:Y
          description: |-
            キャラ画像の表示位置（縦方向）を調整します
            マイナスだと上、プラスだと下にずらします
          parent: render
          min: -10000
          max: 10000
          default: 0
        - name: pictureScale
          type: number
          text: キャラ画像:拡大率
          description: |-
            キャラ画像の拡大率を指定します
            1を指定した場合は1倍なのでそのまま表示されます
          parent: render
          decimals: 2
          min: 0.01
          default: 1
        - name: advanced
          type: string
          text: ■ 個別設定（省略可）
        - name: backColor1
          type: string
          text: 背景色1
          description: |-
            カットイン表示領域の背景色を設定します。
            省略した場合は共通設定が使用されます
          parent: advanced
          default: ''
        - name: backColor2
          type: string
          text: 背景色2
          description: |-
            カットイン表示領域の背景色を設定します
            空欄の場合は背景色1と一緒になります
          parent: advanced
          default: ''
        - name: backTone
          type: struct
          text: エフェクト色調1
          description: |-
            背景エフェクトの色調を設定します
            ※RPGツクールMZのみ有効
          parent: advanced
          default:
            isUse: false
            red: '-128'
            green: '-128'
            blue: '128'
          struct: ColorCustomize
        - name: borderTone
          type: struct
          text: エフェクト色調2
          description: |-
            境界線エフェクトの色調を設定します
            ※RPGツクールMZのみ有効
          parent: advanced
          default:
            isUse: false
            red: '0'
            green: '0'
            blue: '0'
          struct: ColorCustomize
        - name: backImage1
          type: file
          text: 背景画像1
          description: |-
            背景全体に表示される画像を指定します
            空欄の場合は共通設定を使用します
          parent: advanced
          dir: img/pictures
          default: ''
        - name: backImage2
          type: file
          text: 背景画像2
          description: |-
            キャラクターの背景部分に表示される画像を指定します
            空欄の場合は共通設定を使用します
          parent: advanced
          dir: img/pictures
          default: ''
        - name: borderImage
          type: file
          text: 境界線画像
          description: |-
            カットインの境界線部分に表示される画像を指定します
            空欄の場合は共通設定を使用します
          parent: advanced
          dir: img/pictures
          default: ''
        - name: borderBlendMode
          type: select
          text: 境界線画像のブレンド
          description: |-
            境界線画像のブレンドモードを指定します
            省略の場合は共通設定を使用します
          parent: advanced
          default: ''
          options:
            - name: 省略
              value: ''
            - name: 通常
              value: normal
            - name: 加算
              value: add
        - name: sound
          type: struct
          text: 効果音
          description: |-
            カットイン表示時の効果音を指定します
            指定しない場合はデフォルトの効果音を使用します
          parent: advanced
          default:
            name: ''
            volume: '90'
            pitch: '100'
            pan: '0'
          struct: Sound
        - name: note
          type: multiline_string
          text: メモ欄
          description: |-
            メモ欄です。
            ツクールのメモ欄同様に使えます。
          default: ''
        - name: enemyId
          type: enemy
          text: 敵のID
          description: カットイン対象の敵を設定します
          parent: target
          default: 0
        - name: skillId
          type: skill
          text: スキルのID
          description: カットイン対象のスキルを設定します
          parent: target
          default: 0
    - name: Color
      params:
        - name: red
          type: number
          text: 赤
          description: |-
            赤色の強さを設定します
            -255から255の範囲で設定してください
          min: -255
          max: 255
          default: 0
        - name: green
          type: number
          text: 青
          description: |-
            青色の強さを設定します
            -255から255の範囲で設定してください
          min: -255
          max: 255
          default: 0
        - name: blue
          type: number
          text: 緑
          description: |-
            緑色の強さを設定します
            -255から255の範囲で設定してください
          min: -255
          max: 255
          default: 0
    - name: ColorCustomize
      params:
        - name: isUse
          type: boolean
          text: 使用するか？
          description: |-
            個別設定を使用するか指定します
            使用しない場合は共通設定の色になります
          on: 使用する
          off: 使用しない
          default: false
        - name: red
          type: number
          text: 赤
          description: |-
            赤色の強さを設定します
            -255から255の範囲で設定してください
          min: -255
          max: 255
          default: 0
        - name: green
          type: number
          text: 青
          description: |-
            青色の強さを設定します
            -255から255の範囲で設定してください
          min: -255
          max: 255
          default: 0
        - name: blue
          type: number
          text: 緑
          description: |-
            緑色の強さを設定します
            -255から255の範囲で設定してください
          min: -255
          max: 255
          default: 0
    - name: Sound
      params:
        - name: name
          type: file
          text: 効果音ファイル
          description: 効果音ファイルを選択します
          dir: audio/se
          default: ''
        - name: volume
          type: number
          text: 音量
          description: |-
            効果音の音量を指定します。
            0～100で指定してください。
          min: 0
          max: 100
          default: 90
        - name: pitch
          type: number
          text: ピッチ
          description: |-
            効果音のピッチを指定します。
            100が通常です。
          min: 0
          max: 200
          default: 100
        - name: pan
          type: number
          text: パン
          description: |-
            効果音のパンを指定します。
            0が通常です。
          min: -100
          max: 100
          default: 0

Torigoya_SkillCutIn:
  <<: *base
  target:
    - MV

TorigoyaMZ_SkillCutIn:
  <<: *base
  target:
    - MZ
  commands:
    - name: showActorCutIn
      text: 味方カットインの表示
      description: |
        味方のカットインを表示します
      args:
        - name: name
          type: string
          text: 使用カットイン名
          description: |-
            カットイン設定のメモ欄で指定した呼び出し名を指定します
            条件判定はすべてスキップされます
          default: ''
    - name: showEnemyCutIn
      text: 敵カットインの表示
      description: |
        敵のカットインを表示します
      args:
        - name: name
          type: string
          text: 使用カットイン名
          description: |-
            カットイン設定のメモ欄で指定した呼び出し名を指定します
            条件判定はすべてスキップされます
          default: ''
  base:
    - TorigoyaMZ_FrameTween
  orderAfter:
    - TorigoyaMZ_FrameTween
